<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name=" viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link rel="icon" type="image/png" href="./Images/web-dev.png">

    <script>if (sessionStorage.getItem('question-number') !== null){} else {window.location.replace("./index.html");}</script>

	<script>var exports = {};</script>

    <link rel="stylesheet" href="./src/bootstrap/main.css">
    <script src="./scripts/dependencies/bootstrap.bundle.min.js"></script>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/1	1.9.0/styles/sunburst.css">
	<script src= "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/highlight.min.js"></script>	
	<script>hljs.highlightAll();</script> 

	<link rel="stylesheet" href="./src/googlefont/main.css">
	<link rel="stylesheet" href="./src/indexCSS/main.css">
    <link rel="stylesheet" href="./src/checkpointCSS/main.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <script src="./scripts/dependencies/jquery.min.js"></script>

    <script src="./scripts/dependencies/confetti.browzer.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./src/confetti/csshake-slow.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="./scripts/indexJS/cloud_connect.js"></script>

    <style>
        .survey-question{
            margin: 10px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            flex-wrap: wrap;
            min-height: 50px;
        }

        .slider-label{ 
            font-weight: bold;
            text-align: justify;
        }

        .sliderInput{
            font-family: 'Courier New', Courier, monospace; 
            font-weight: bold; 
          width: 65px; 
            text-align: center; 
            height: 35px;
        }
    </style>

    <title>Inclusion Investigator Game</title>
</head>
<body>
	<div style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; margin-left: 1vw;">
        <div style="display: flex; flex-wrap: nowrap;">
            <img src="./Images/web-dev.png" alt="Header Web Dev Icon" style="height: 72.5px;">
	        <div class="days-one-regular" style="font-size: calc(10px + 1.25vw); text-align: left; padding-top: 2vh; padding-bottom: 2vh; padding-left: 2vw; padding-right: 1vw; transform: scaleY(1.5); text-align: center;"><b>&lt;h1&gt;INCLUSION INSPECTOR&lt;/h1&gt;</b></div>
        </div>
        <div class="wallpoet-regular" style="flex-grow: 1; font-size: calc(25px + 1.5vw); white-space: nowrap; text-align: right; padding-right: 50px;" id="clock">00:00:00</div>
        <div class="wallpoet-regular" style="font-size: calc(25px + 1.5vw); white-space: nowrap; text-align: right; padding-right: 15px;" id="score-text">Score: 0</div>
        <img id="rank-image" src="./Images/rank0.png" style="height: 60px; width: 60px; margin-right: 0.25vw;" alt="You are at Rank 1">
    </div>
	
    <h2 class="lobster-regular" style="text-align: center;">&#127881;&#127882; Congratulations! &#127882;&#127881;</h5>
    <h5 style="text-align: center; color: rgb(100, 100, 100)"><i>Have a look at your journey so far:-</i></h5>

    <div style="display: flex; font-size: large;">
        <div class="content" style="flex: 1; display: flex; flex-wrap: wrap; border-color: black; border-width: 2px; border-style: solid; border-radius: 10px; height: 62.5vh; overflow: auto; margin: 20px 0px;">
            <ol id="checkpoint-div" style="margin: 10px; text-align: justify; font-family: 'Times New Roman', Times, serif;">
            </ol>
        </div>  

        <div style="width: 600px; height: 62.5vh; overflow: auto; transition: 1s; background-color: rgb(240, 240, 240); border-radius: 10px; display: flex; flex-direction: column; margin: 20px; justify-content: center; align-items: center;">   
            <div style="padding: 15px; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center;" id="questions-headings-and-labels">
                <h4 class="lobster-regular" style="text-align: center; flex: 1;">Questions So Far:-</h5>
                <div id="question-label-container" style="width: 400px;">
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-1" tabindex="-1">1</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-2" tabindex="-1">2</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-3" tabindex="-1">3</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-4" tabindex="-1">4</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-5" tabindex="-1">5</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-6" tabindex="-1">6</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-7" tabindex="-1">7</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-8" tabindex="-1">8</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-9" tabindex="-1">9</button>
                    <button type="button" class="btn btn-outline-primary question-label" id="question-label-10" tabindex="-1">10</button>
                </div>
            </div>
        </div>
    </div>
    
    <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
        <button type="button" class="btn btn-primary" style="font-size: x-large; width: 200px;" id="survey-open-button" onclick="document.getElementById('surveyModalOpenButton').click();">SURVEY</button>
        <button type="button" class="btn btn-primary" style="font-size: x-large; width: 350px;" id="downloadPdf">DOWNLOAD Q&A HISTORY</button>
        <button type="button" class="btn btn-primary" style="font-size: x-large; width: 200px;" id="continue-button" onclick="continueButton();">CONTINUE</button>
    </div>

    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#surveyModal"
        id="surveyModalOpenButton" style="display: none;">Survey Modal Open Button
    </button>

    <div class="modal fade" id="surveyModal" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="surveyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-3 lobster-regular" id="surveyModalLabel"
                        style="text-align: center; width: 100%;">SURVEY (Five is the highest)</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="survey-modal-close"></button>
                </div>
                <div class="modal-body" style="height: 500px; overflow-y: auto;">
                    <label for="weightSlider1" class="slider-label">1. Did the game help you understand the importance of accessibility in websites?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider1" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question1Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel1" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>
                    
                    <label for="weightSlider2" class="slider-label">2. Were the accessibility violations presented in the game clear and easy to understand?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider2" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question2Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel2" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider3" class="slider-label">3. How confident do you feel in identifying accessibility violations after playing the game?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider3" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question3Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel3" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider4" class="slider-label">4. Were the AI-generated scenarios relevant and realistic?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider4" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question4Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel4" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider5" class="slider-label">5. Did the scenarios cover a wide range of accessibility issues (e.g., visual, auditory, mobility)?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider5" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question5Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel5" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider6" class="slider-label">6. How challenging were the scenarios presented in the game?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider6" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question6Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel6" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider7" class="slider-label">7. How engaging was the game?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider7" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question7Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel7" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider8" class="slider-label">8. Were the feedbacks provided after each scenario helpful for learning?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider8" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question8Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel8" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider9" class="slider-label">9. Overall, how would you rate the game’s ability to teach accessibility principles?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider9" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question9Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel9" value="5"></input>
                    </div>
                    <div style="background-color: rgb(230, 230, 230); width: 95%; height: 1px; margin: 10px;"></div>

                    <label for="weightSlider10" class="slider-label">10. How likely are you to recommend this game to others interested in learning about accessibility?</label>
                    <div class="survey-question">
                        <input type="range" id="weightSlider10" style="accent-color: #0d6efd; width: 500px;"
                            min="0" max="5" step="1" value="5">
                        <input aria-label='Question10Input' class="form-control sliderInput" type="number" step="1" min="0" max="5" id="weightLabel10" value="5"></input>
                    </div>
                    <br>
                    <div style="display: flex; justify-content: center; width: 100%;">
                        <button type="button" class="btn btn-primary" onclick="onSurveySubmit()" style="width: 200px; font-size: x-large;">SUBMIT</button>
                    </div>                     
                </div>
            </div>
        </div>
    </div>
    
    <script src="./scripts/checkpointJS/checkpoint.js"></script>
    <script>
        document.getElementById('downloadPdf').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();

            let pastScenarios = JSON.parse(sessionStorage.getItem('past-scenarios'));

            let yPosition = 20;
            const pageHeight = pdf.internal.pageSize.height;
            const margin = 20;
            const lineHeight = 10;
            const paragraphSpacing = 5;

            for (let i = 0; i < pastScenarios.length; i++) {
                const lines = pdf.splitTextToSize((i + 1) + ") " + pastScenarios[i], 180); 

                if (yPosition + lines.length * lineHeight > pageHeight - 2 * margin && i != 0) {
                    pdf.addPage();
                    yPosition = margin;
                }
                pdf.text(lines, 10, yPosition);
                yPosition += lines.length * lineHeight + paragraphSpacing;
            }

            pdf.save("WCAG_Question_List.pdf");

        });
    </script>
    <script src="./scripts/checkpointJS/survey.js"></script>
</body>
</html>